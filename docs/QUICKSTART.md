# Быстрый старт

## Установка и настройка

1. **Активируйте виртуальное окружение:**

   Windows (PowerShell):
   ```powershell
   .\venv\Scripts\Activate.ps1
   ```

   Windows (CMD):
   ```cmd
   venv\Scripts\activate.bat
   ```

   Linux/Mac:
   ```bash
   source venv/bin/activate
   ```

2. **Установите зависимости:**

   ```bash
   pip install -r requirements.txt
   ```

3. **Настройте переменные окружения:**

   Создайте файл `.env` в корне проекта:
   
   ```env
   VK_ACCESS_TOKEN=ваш_токен_доступа_vk_api
   VK_GROUP_ID=id_вашей_группы
   ```
   
   **Важно:** Файл `.env` уже добавлен в `.gitignore` и не будет попадать в репозиторий.

4. **Запустите приложение:**

   ```bash
   python main.py --help
   ```

## Структура экспорта Telegram

Проект ожидает следующую структуру экспорта Telegram Desktop:

### HTML формат:
```
telegram_export/
├── messages.html (или другие .html файлы)
└── files/
    ├── video1.mp4
    ├── video2.webm
    └── ...
```

### JSON формат:
```
telegram_export/
├── messages.json (или другие .json файлы)
└── files/
    ├── video1.mp4
    ├── video2.webm
    └── ...
```

## Получение токена VK API

1. Перейдите в настройки вашего сообщества VK
2. Раздел "Работа с API" → "Создать токен"
3. Выберите права:
   - `video` - для загрузки видео
   - `groups` - если публикуете в группу
4. Скопируйте токен в файл `.env` как `VK_ACCESS_TOKEN`

**Альтернативный способ (для пользовательского токена):**
1. Перейдите на https://vk.com/apps?act=manage
2. Создайте новое приложение типа "Веб-сайт"
3. Получите токен доступа с теми же правами

## Пример использования

```bash
# Публикация всех видео из стандартных папок (input/Экпорты ЕГЭ и input/Экспорт Python)
python main.py

# Публикация из указанного экспорта
python main.py --export-path "input/Экпорты ЕГЭ/апрель"

# Тестовый запуск без публикации (показывает список видео, которые будут опубликованы)
python main.py --dry-run

# Настройка задержки между загрузками (по умолчанию 5 секунд)
python main.py --delay 10

# Настройка количества повторных попыток при ошибке (по умолчанию 3)
python main.py --max-retries 5
```

## Важные замечания

- **Задержки между загрузками:** По умолчанию установлена задержка 5 секунд между загрузками для предотвращения блокировок VK API. При необходимости можно увеличить через параметр `--delay`.

- **Повторные попытки:** При ошибках загрузки система автоматически повторяет попытку до 3 раз (настраивается через `--max-retries`).

- **Логирование:** Все операции логируются в файл `publisher.log` и выводятся в консоль.

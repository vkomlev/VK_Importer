# Структура проекта

## Обзор

Проект организован по модульному принципу с четким разделением ответственности.

## Директории

### `src/` - Основной код приложения

#### `src/parsers/` - Парсеры экспорта Telegram
- `base.py` - Базовый абстрактный класс для парсеров
- `html_parser.py` - Парсер HTML экспорта Telegram
- `json_parser.py` - Парсер JSON экспорта Telegram

**Ответственность:**
- Определение формата экспорта
- Извлечение сообщений из экспорта
- Поиск и сопоставление видеофайлов с сообщениями
- Парсинг метаданных (дата, текст сообщения)

#### `src/title_generators/` - Генераторы заголовков
- `base.py` - Базовый абстрактный класс генераторов
- `generators.py` - Реализации генераторов:
  - `SimpleTitleGenerator` - из имени файла
  - `DateTitleGenerator` - с датой
  - `DescriptionTitleGenerator` - из описания
  - `CompositeTitleGenerator` - комбинация нескольких

**Ответственность:**
- Формирование заголовков видео по настраиваемым правилам
- Поддержка различных стратегий генерации

#### `src/models/` - Модели данных
- `video.py` - Модель `VideoData` с данными о видео

**Ответственность:**
- Представление структурированных данных о видео
- Валидация данных

#### `src/publisher/` - Публикация в VK
- `vk_publisher.py` - Публикатор через VK API

**Ответственность:**
- Загрузка видео в VK Video
- Обработка ошибок публикации
- Логирование процесса

#### `src/utils/` - Вспомогательные утилиты
- `file_utils.py` - Утилиты для работы с файлами

**Ответственность:**
- Валидация видеофайлов
- Поиск файлов в директориях

### `config/` - Конфигурация
- `config.example.yaml` - Пример конфигурационного файла

**Содержит:**
- Настройки VK API (токен, group_id)
- Настройки генераторов заголовков
- Пути к экспортам Telegram
- Настройки публикации и логирования

### `tests/` - Тесты
- Структура для unit и интеграционных тестов

### `logs/` - Логи
- Директория для файлов логов приложения

## Файлы верхнего уровня

- `main.py` - Точка входа CLI приложения
- `setup.py` - Конфигурация пакета Python
- `requirements.txt` - Зависимости проекта
- `README.md` - Основная документация
- `PLAN.md` - План внедрения и разработки
- `QUICKSTART.md` - Инструкция по быстрому старту
- `.gitignore` - Игнорируемые файлы Git

## Архитектурные принципы

1. **Разделение ответственности** - каждый модуль отвечает за свою область
2. **Расширяемость** - легко добавлять новые парсеры и генераторы через базовые классы
3. **Типизация** - использование type hints для всех публичных API
4. **Логирование** - все операции логируются для отладки
5. **Обработка ошибок** - явная обработка исключений с контекстом

## Поток данных

```
Экспорт Telegram (HTML/JSON)
    ↓
Парсер (HTMLParser/JSONParser)
    ↓
VideoData (модель)
    ↓
Генератор заголовков
    ↓
VKPublisher
    ↓
VK Video
```

## Расширение функциональности

### Добавление нового парсера
1. Наследовать от `BaseParser`
2. Реализовать методы `detect_format()` и `parse()`
3. Зарегистрировать в фабрике парсеров

### Добавление нового генератора заголовков
1. Наследовать от `BaseTitleGenerator`
2. Реализовать методы `generate()` и `get_name()`
3. Добавить в `title_generators/__init__.py`
